var socket=io.connect("http://127.0.0.1:1337/"),app=app||{};$(function(){var $blastField=$("#blast"),$allPostsTextArea=$("#allPosts"),$clearAllPosts=$("#clearAllPosts"),$sendBlastButton=$("#send"),addContent=function(content){var copy=$allPostsTextArea.html();$allPostsTextArea.html(copy+content),$allPostsTextArea.scrollTop($allPostsTextArea[0].scrollHeight-$allPostsTextArea.height())};socket.on("out-log",function(data){var content=data.msg.replace(/\r\n/g,"<br>");addContent("<pre>"+content+"</pre>")}),socket.on("message",function(data){var content=data.msg;addContent('<p class="text-warning">'+content+"</p>")}),socket.on("command",function(data){data.msg;addContent('<p class="text-info">'+data.msg+"</p>"),addContent("<pre>"+data.resp+"</pre>")}),$clearAllPosts.click(function(){$allPostsTextArea.text("")}),$sendBlastButton.click(function(){var blast=$blastField.val();if(blast){var arr=blast.split(" "),cmd_name=arr[0],cmd_args=arr.splice(1);blast.length&&socket.emit("command",{cmd:cmd_name,args:cmd_args},function(){$blastField.val("")})}}),$blastField.keydown(function(e){13==e.keyCode&&$sendBlastButton.trigger("click")})});